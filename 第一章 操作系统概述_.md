## 什么是操作系统

- 作为拓展机器
  - 是计算机硬件的扩充，掩盖了硬件操作的细节，使用户或程序员与硬件细节隔离，从而方便了用户的使用
- 作为资源管理者
  - 对系统的硬软件资源实施有效的控制和管理，提高系统资源的利用率
  - 从两种方式实现多路复用（共享）资源
    - 在时间上复用：当一种资源在时间上复用时，不同的程序或用户轮流使用它
    - 在空间上复用：每个客户都得到资源的一部分，这样就不用排队了

## 操作系统的历史

- Vacuum Tubes
- Transistors and Batch Systems
- ICs and Multiprogramming
- Personal Computers
- Mobile Computers

## 计算机硬件概览

- 处理器
  - 计算机的大脑是CPU，它从内存中**取出指令并执行**
  - 在每个CPU基本周期中，首先从内存中取出指令，解码以确定其类型和操作熟，接着执行之，然后取指、解码并执行下一条指令
  - 寄存器
    - 在CPU内部用来保存关键变量和临时数据——程序计数器、堆栈指针、程序状态字
  - 多线程和多核CPU
    - 多线程——一个CPU保存两个线程的状态，在纳秒尺度上进行切换，但是任意时间，CPU都只执行一个线程
    - 多核——多处理器，并行计算

- 存储器
  - 寄存器——用和CPU相同的材料制成，访问没有延时
  - 高速缓存
    - 将一些可能会用到的指令和数据放到缓存中
    - 如果CPU需要数据，会先到cache中寻找，如果找到了，就是高速缓存命中，如果没找到，要到内存中找（慢）
  - 主存（RAM）
    - 所有不能在高速缓存中得到满足的访问请求都会转往主存
  - 磁盘
    - 磁盘唯一的问题是随机访问数据时大约慢了三个数量级。其低速的原因是因为磁盘是一种机械装置（机械硬盘）
- 输入/输出设备
  - I/O设备一般包括两个部分——设备控制器和设备本身
    - 设备控制器
      - 插在电路板上的一块芯片或一组芯片，这块电路板物理的控制设备。它从操作系统接收命令
      - 例如——从设备读取数据，并且完成数据的处理
      - 每类设备控制器都是不同的，所以，需要不同的软件进行控制。专门与控制器对话，发出命令并接受响应的软件，称为设备驱动程序
      - 驱动需要被放在操作系统中，这样才能够在内核态下运行
      - 连接驱动的三种方法
        - 重新连接内核，把驱动连进去
        - 操作系统说需要一个驱动，然后重启，在启动过程中找到这个驱动
        - 在操作系统运行过程中直接安装一个驱动
  - 实现输入输出的方式
    - 忙等待——发出一个系统调用，然后执行I/O，CPU一直等待I/O的数据，直到数据返回才做别的事情
    - 中断机制——需要I/O时，让I/O设备执行对应操作，CPU不需要等待；I/O结束后，中断控制器对CPU发起一个中断，CPU处理I/O数据
    - DMA(Direct Memory Access)——不需要CPU的参与，直接控制内存和控制器之间的位流；CPU分配DMA芯片需要进行的传输操作；DMA得到数据后，也会对CPU发起中断
- 总线
  - 总线就是CPU连接其他设备的线，各种设备间的数据传输通过总线完成
  - 常用的总线
    - PCIe——Peripheral Component Interconnect Express
    - DMI——Direct Media Interface
    - USB——Universal Serial Bus
    - SCSI——Small Computer System Interface
- 启动计算机
  - 通电后，系统首先启动BIOS（Basic Input Output System）里面的程序, 内部包含了一下基本的参数设置，以及接下来要启动的程序，从而把系统启动起来

## 操作系统总览

- 大型机操作系统
- 服务器操作系统
- 多处理器操作系统
- 个人计算机操作系统
- 掌上计算机操作系统
- 嵌入式操作系统
- 等等

## 操作系统概念

- 进程
  - 进程根本上是一个容器（资源调度集合），保存了所有运行一个程序所需要的信息
- 地址空间
  - 计算机的主存用来保存正在执行的程序，为了找到程序在主存（也就是内存）的位置，物理内存设置了对应的地址编号，地址编号的一个集合就是地址空间。
  - 地址空间这个概念其实就是对内存的一个抽象，用来方便管理内存及进程
- 文件——数据的集合，挂在文件树下面
- I/O——输入输出设备
- 保护
  - 计算机有大量信息，用户希望对其进行保护
  - 对一个文件来说，通常有三种状态
    - 可读（只能读取，不可修改）
    - 可写（只能写入，不可读出）
    - 可读可写

